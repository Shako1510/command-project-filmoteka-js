{"mappings":"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","sources":["src/js/services/local-storage-api.js","<<jsx-config-pragma.js>>","node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js"],"sourcesContent":["\nexport default class LocalStorageAPI {\n\n  constructor() {\n    if (!this.loadData('watched')) this.saveData('watched', new Object([]));\n    if (!this.loadData('queue')) this.saveData('queue', new Object([]));\n  }\n\n  // Отримання даних за ключем. Повертає дані, або null\n  loadData(key) {\n    const localStorageData = localStorage.getItem(key);\n    return JSON.parse(localStorageData);\n  };\n\n  // Запис даних до сховища. Записує дані з ключем key\n  saveData(key, value) {\n    const dataToSave = JSON.stringify(value);\n    localStorage.setItem(key, dataToSave);\n    return 'ok';\n  };\n\n  // Отримання колекції фільмів. Повертає масив фільмів, або порожній масив з його попереднім записом до сховища\n  getMovies(key, page = 1) {\n    const movies = this.loadData(key); // отр \n    const totalPages = this.getTotalPages(movies);\n    console.log(totalPages);\n    const result = {movies: this.getPaginationPage(page, movies), totalPages};\n    console.log(result);\n      return result;\n  };\n  \n  // Додавання фільмів до колекції. Додає новий елемент до поточної колекції фільмів у сховищі\n  setMovie(key, value) {\n   try {\n    const currentCollection = this.getMovies(key).movies;\n    currentCollection.push(value);\n    return this.saveData(key, currentCollection);\n    \n   } catch (error) {\n    console.log(error.name);\n    console.log(error.message);\n   }\n  };\n\n  removeMovie(key, id) {\n    const currentCollection = this.getMovies(key).movies;\n    const currentCollectionIds = currentCollection.map(item => item.id);\n    const indexToRemove = currentCollectionIds.indexOf(id);\n    if (indexToRemove >= 0) {\n      currentCollection.splice(indexToRemove, 1);\n      this.saveData(key, currentCollection);\n    }\n  };\n\n  getTotalPages(movies) {\n      return Math.ceil(movies.length / 20);\n    };\n\n    getPaginationPage(page, array ){\n\n     const perPage = 20;\n     let start = (page - 1) * perPage;\n     let end = start + perPage;\n     console.log(start, end);\n     return array.slice(start, end);\n    \n    };\n    \n  createGenres(array){\n    const genres = this.loadData('genres');\n      return array\n        .map(id => genres.find(element => element.id === id))\n        .map(item => item.name);\n  };\n\n    checkMovie(id) {\n      let isMovieInLocalStorage = 'no';\n      let currentCollection;\n      let currentCollectionIds;\n      currentCollection = this.getMovies('watched').movies;\n      currentCollectionIds = currentCollection.map(item => item.id);\n      if (currentCollectionIds.includes(id)) {\n        isMovieInLocalStorage = 'watched';\n      }\n      currentCollection = this.getMovies('queue').movies;\n      currentCollectionIds = currentCollection.map(item => item.id);\n      if (currentCollectionIds.includes(id)) {\n        isMovieInLocalStorage = 'queue';\n      }\n      return isMovieInLocalStorage;\n    }\n  };\n\n",null,"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n"],"names":["$8MBJY","parcelRequire","$f81bc9f24a80f169$export$2e2bcd8739ae039","LocalStorageAPI","this","loadData","saveData","Object","key","localStorageData","localStorage","getItem","JSON","parse","value","dataToSave","stringify","setItem","page","arguments","length","movies","totalPages","getTotalPages","console","log","result","getPaginationPage","currentCollection","getMovies","push","error","name","message","id","indexToRemove","map","item","indexOf","splice","Math","ceil","array","start","end","slice","genres","find","element","isMovieInLocalStorage","includes","defineProperty","module","exports","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype"],"version":3,"file":"library.b702bc21.js.map"}