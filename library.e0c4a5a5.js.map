{"mappings":"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","sources":["src/js/services/library.js","node_modules/@swc/helpers/lib/_define_property.js","src/js/services/paginationHandler.js"],"sourcesContent":["import LocalStorageAPI from './local-storage-api';\nconst localStorageAPI = new LocalStorageAPI();\nimport { PaginationHandler } from './paginationHandler';\n\nconst notification = document.querySelector('.notification'); //\nconst formLibraryRef = document.querySelector('#libraryForm'); //\nconst WatchedRef = document.querySelector('#Watched'); //\nconst library = document.querySelector('#library-render');\n// localStorage.setItem('watched', JSON.stringify(filmWatched));\n// localStorage.setItem('queue', JSON.stringify(filmQueue));\n\n// function btnLibraryHandler(functionRender, renderDefault)\nconst watchedFilms = JSON.parse(localStorage.getItem('watched'));\nconsole.log(watchedFilms);\nconst queueFilms = JSON.parse(localStorage.getItem('queue'));\nconsole.log(queueFilms);\n\nfunction functionRender(data) {\n  library.innerHTML = '';\n\n  console.log(data);\n\n  const markupCard = data\n    .map(movie => {\n      const genreLibrary = movie.genres.map(item => item.name);\n      console.log(genreLibrary);\n\n      let genreRender = [];\n      if (genreLibrary.length > 3) {\n        genreRender = genreLibrary.slice(0, 2);\n        genreRender.push('Other');\n        genreRender = genreRender.join(', ');\n      } else {\n        genreRender = genreLibrary.join(', ');\n      }\n\n      let date = '';\n      if (movie.release_date) {\n        date = movie.release_date.slice(0, 4);\n      }\n\n      return `\n            <li class=\"collection__item\">\n            <div class=\"card\">\n            <a href=\"\" class=\"card__link\" id=\"${movie.id}\">\n          <img class=\" card__img\" src=\"https://www.themoviedb.org/t/p/w500/${movie.poster_path}\"onerror=\"this.onerror=null;this.src='https://ih1.redbubble.net/image.3553185369.0580/st,small,507x507-pad,600x600,f8f8f8.jpg'\" loading=\"lazy\" alt=\"\" >\n          <div class=\"card__wrap\">\n             <h2 class=\"card__title\" >${movie.title}</h2>\n          <div class=\"card__data\">\n       \n           <p class=\"card__genre\">${genreRender}</p>\n                                \n        <p class=\"card__year card__text\">&nbsp | ${date}</p>\n              </div>\n    </div></a>\n    \n            </div>\n            </li>  \n     `;\n    })\n    .join('');\n  library.insertAdjacentHTML('beforeend', markupCard);\n\n  const pagination = new PaginationHandler(\n    data.page,\n    data.totalPage,\n    document.querySelector('.pagination__root')\n  );\n\n  pagination.initPagination();\n\n  pagination.addEventListener('pageChanged', onSearchMovie);\n}\n\nfunction renderDefault() {\n  const notificationText = document.createElement('p');\n  notificationText.classList.add('notification-text');\n  notificationText.innerHTML = \"Oops, you didn't add anything yet...\";\n  notification.appendChild(notificationText);\n}\n\nfunction btnLibraryHandler(functionRender, renderDefault) {\n  formLibraryRef.addEventListener('change', onButtonClick);\n  function onButtonClick() {\n    // e.preventDefault();\n    console.log('поменяли кнопку');\n    if (WatchedRef.checked) {\n      if (!watchedFilms) {\n        console.log('отображаем заглушку');\n        renderDefault();\n        // викликаємо функцію рендеру заглушки\n      } else {\n        functionRender(watchedFilms);\n        console.log('рендерим watchedFilms', watchedFilms);\n      }\n    } else {\n      if (!queueFilms) {\n        console.log('отображаем заглушку');\n        renderDefault();\n        // викликаємо функцію рендеру заглушки\n      } else {\n        functionRender(queueFilms);\n        console.log('рендерим queueuFilms', queueFilms);\n      }\n    }\n  }\n}\nbtnLibraryHandler(functionRender, renderDefault);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","export class PaginationHandler {\n  rootElement = '';\n  totalPages = 1;\n  currentPage = 1;\n  currentItem = '';\n  paginationObservers = [];\n  pageItems = [0];\n  itemsCarrouselElement = '';\n  arrowLeftElement = '';\n  arrowRightElement = '';\n  dotsLeftElement = '';\n  dotsRightElement = '';\n  positionOfCarrousel = 0;\n\n  constructor(currentPage = 1, totalPages, root) {\n    this.currentPage = currentPage;\n    this.totalPages = totalPages;\n    this.root = root;\n  }\n\n  markupPagination = () => {\n    let markup = '';\n\n    if (this.totalPages <= 9) {\n      markup = `<div class=\"pagination__wrap\">\n              <div class=\"pagination__item-arrow pagination__item-arrow--left\"></div>`;\n      for (let i = 1; i <= this.totalPages; i += 1) {\n        markup = markup + `<div class=\"pagination__item\">${i}</div>`;\n      }\n      markup =\n        markup +\n        `<div class=\"pagination__item-arrow pagination__item-arrow--right\"></div>\n    </div>`;\n    } else {\n      markup = `<div class=\"pagination__wrap\">\n      <div class=\"pagination__item-arrow pagination__item-arrow--left\"></div>\n      <div class=\"pagination__item pagination__item--first\">1</div>\n      <div class=\"pagination__wrap--dots\">\n        <div class=\"pagination__item pagination__item--second\">2</div>\n        <div class=\"pagination__dots pagination__dots--left invisible\">...</div>\n        <div class=\"pagination__wrap--carrousel\">\n          <div class=\"pagination__carrousel\">`;\n\n      for (let i = 3; i <= this.totalPages - 2; i += 1) {\n        markup =\n          markup +\n          `<div class=\"pagination__item pagination__item--carrousel\">${i}</div>`;\n      }\n\n      markup =\n        markup +\n        `</div>\n      </div>\n      <div class=\"pagination__dots pagination__dots--right\">...</div>\n      <div class=\"pagination__item pagination__item--prelast\">${\n        this.totalPages - 1\n      }</div>\n      </div>\n      <div class=\"pagination__item pagination__item--last\">${\n        this.totalPages\n      }</div>\n      <div class=\"pagination__item-arrow pagination__item-arrow--right\"></div>\n    </div>`;\n    }\n    return markup;\n  };\n\n  renderPagination() {\n    console.log('render with currentPage: ', this.currentPage);\n    this.root.innerHTML = this.markupPagination();\n\n    this.arrowLeftElement = this.root.querySelector(\n      '.pagination__item-arrow--left'\n    );\n    this.arrowRightElement = this.root.querySelector(\n      '.pagination__item-arrow--right'\n    );\n\n    this.addingListenerToItems();\n    this.addingListenerToArrowButton();\n\n    if (this.totalPages > 9) {\n      this.itemsCarrouselElement = this.root.querySelector(\n        '.pagination__carrousel'\n      );\n      this.dotsLeftElement = this.root.querySelector('.pagination__dots--left');\n      this.dotsRightElement = this.root.querySelector(\n        '.pagination__dots--right'\n      );\n    }\n  }\n\n  setViewPagination = () => {\n    if (this.currentPage === 1) {\n      this.arrowLeftElement.classList.add('hidden');\n    } else {\n      this.arrowLeftElement.classList.remove('hidden');\n    }\n    if (this.currentPage === this.totalPages) {\n      this.arrowRightElement.classList.add('hidden');\n    } else {\n      this.arrowRightElement.classList.remove('hidden');\n    }\n\n    if (this.totalPages <= 9) return;\n\n    if (this.currentPage > 5) {\n      this.dotsLeftElement.classList.remove('invisible');\n    } else {\n      this.dotsLeftElement.classList.add('invisible');\n    }\n    if (this.totalPages - this.currentPage >= 5) {\n      this.dotsRightElement.classList.remove('invisible');\n    } else {\n      this.dotsRightElement.classList.add('invisible');\n    }\n  };\n\n  changePageUp = () => {\n    this.resetCurrentItem();\n    this.currentPage += 1;\n    this.currentItem = this.pageItems[this.currentPage];\n    this.makeItemIsCurrent(this.currentItem);\n    this.pageChanged(this.currentPage);\n  };\n\n  changePageDown = () => {\n    this.resetCurrentItem();\n    this.currentPage -= 1;\n    this.currentItem = this.pageItems[this.currentPage];\n    this.makeItemIsCurrent(this.currentItem);\n    this.pageChanged(this.currentPage);\n  };\n\n  apdateCurrentPage = event => {\n    this.resetCurrentItem();\n    this.currentPage = Number(event.target.innerHTML);\n    this.makeItemIsCurrent(event.target);\n    this.setViewPagination();\n    this.pageChanged(this.currentPage);\n  };\n\n  calculateCarrouselPosition = () => {\n    if (this.currentPage < 5) return 0;\n    if (this.totalPages - this.currentPage < 4)\n      return -(this.totalPages - 9) * 45;\n    return 135 - (this.currentPage - 2) * 45;\n  };\n\n  moveItemsCarrousel = () => {\n    this.itemsCarrouselElement.style.transform = `translatex(${this.calculateCarrouselPosition()}px)`;\n  };\n\n  addingListenerToItems = () => {\n    document.querySelectorAll('.pagination__item').forEach(item => {\n      this.pageItems.push(item);\n      item.addEventListener('click', this.apdateCurrentPage);\n    });\n  };\n\n  addingListenerToArrowButton = () => {\n    this.arrowLeftElement.addEventListener('click', this.changePageDown);\n    this.arrowRightElement.addEventListener('click', this.changePageUp);\n  };\n\n  makeItemIsCurrent = item => {\n    item.style.backgroundColor = '#FF6B08';\n    item.style.borderRadius = '5px';\n    item.style.color = '#ffffff';\n  };\n\n  resetCurrentItem = () => {\n    this.pageItems[this.currentPage].style.backgroundColor = '#ffffff';\n    this.pageItems[this.currentPage].style.color = '#000000';\n  };\n\n  initPagination = () => {\n    if (this.totalPages === 1) return;\n\n    this.renderPagination();\n    this.currentItem = this.pageItems[this.currentPage];\n    this.makeItemIsCurrent(this.currentItem);\n    if (this.totalPages > 9) this.moveItemsCarrousel();\n    this.setViewPagination();\n  };\n\n  pageChanged(currentPage) {\n    for (let i = 0; i < this.paginationObservers.length; i++) {\n      if (this.paginationObservers[i].eventName === 'pageChanged') {\n        this.paginationObservers[i].listener(currentPage);\n      }\n    }\n  }\n\n  addEventListener = (eventName, listener) => {\n    this.paginationObservers.push({ eventName, listener });\n  };\n}\n"],"names":["$hbkd9","parcelRequire","Object","defineProperty","$da4b248c00322402$exports","value","default","obj","key","enumerable","configurable","writable","$ac04b2d819d230cb$export$750fbdecbe28d3bf","renderPagination","console","log","this","currentPage","root","innerHTML","markupPagination","arrowLeftElement","querySelector","arrowRightElement","addingListenerToItems","addingListenerToArrowButton","totalPages","itemsCarrouselElement","dotsLeftElement","dotsRightElement","pageChanged","i","paginationObservers","length","eventName","listener","constructor","$parcel$interopDefault","markup","classList","add","remove","resetCurrentItem","currentItem","pageItems","makeItemIsCurrent","event","Number","target","setViewPagination","style","transform","calculateCarrouselPosition","document","querySelectorAll","forEach","item","push","addEventListener","apdateCurrentPage","changePageDown","changePageUp","backgroundColor","borderRadius","color","moveItemsCarrousel","$e9dc0a56bdd99914$var$notification","$e9dc0a56bdd99914$var$formLibraryRef","$e9dc0a56bdd99914$var$WatchedRef","$e9dc0a56bdd99914$var$library","$e9dc0a56bdd99914$var$watchedFilms","JSON","parse","localStorage","getItem","$e9dc0a56bdd99914$var$queueFilms","functionRender1","renderDefault1","data","markupCard","map","movie","genreLibrary","genres","name","genreRender","slice","join","date","release_date","id","poster_path","title","insertAdjacentHTML","pagination","page","totalPage","initPagination","onSearchMovie","notificationText","createElement","appendChild","checked"],"version":3,"file":"library.e0c4a5a5.js.map"}