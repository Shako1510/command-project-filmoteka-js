{"mappings":"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","sources":["src/js/services/local-storage-api.js","<<jsx-config-pragma.js>>","node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js"],"sourcesContent":["export default class LocalStorageAPI {\n  constructor() {\n    if (!this.loadData('watched')) this.saveData('watched', new Object([]));\n    if (!this.loadData('queue')) this.saveData('queue', new Object([]));\n  }\n\n  // Отримання даних за ключем. Повертає дані, або null\n  loadData(key) {\n    const localStorageData = localStorage.getItem(key);\n    return JSON.parse(localStorageData);\n  }\n\n  // Запис даних до сховища. Записує дані з ключем key\n  saveData(key, value) {\n    const dataToSave = JSON.stringify(value);\n    localStorage.setItem(key, dataToSave);\n    return 'ok';\n  }\n\n  // Отримання колекції фільмів. Повертає масив фільмів, або порожній масив з його попереднім записом до сховища\n  getMovies(key, page = 1) {\n    const movies = this.loadData(key); // отр\n    const totalPages = this.getTotalPages(movies);\n    const result = {\n      movies: this.getPaginationPage(page, movies),\n      page,\n      totalPages,\n    };\n    return result;\n  }\n\n  // Додавання фільмів до колекції. Додає новий елемент до поточної колекції фільмів у сховищі\n  setMovie(key, value) {\n    if (this.checkMovie(value.id) === this.changeKey(key))\n      this.removeMovie(this.changeKey(key), value.id);\n\n    try {\n      const currentCollection = this.getMovies(key).movies;\n      currentCollection.push(value);\n      return this.saveData(key, currentCollection);\n    } catch (error) {\n      console.log(error.name);\n      console.log(error.message);\n    }\n  }\n\n  removeMovie(key, id) {\n    const currentCollection = this.getMovies(key).movies;\n    const currentCollectionIds = currentCollection.map(item => item.id);\n    const indexToRemove = currentCollectionIds.indexOf(id);\n    if (indexToRemove >= 0) {\n      currentCollection.splice(indexToRemove, 1);\n      this.saveData(key, currentCollection);\n    }\n  }\n\n  getTotalPages(movies) {\n    return Math.ceil(movies.length / 20);\n  }\n\n  getPaginationPage(page, array) {\n    const perPage = 20;\n    let start = (page - 1) * perPage;\n    let end = start + perPage;\n    return array.slice(start, end);\n  }\n\n  createGenres(array) {\n    const genres = this.loadData('genres');\n    return array\n      .map(id => genres.find(element => element.id === id))\n      .map(item => item.name);\n  }\n\n  checkMovie(id) {\n    let isMovieInLocalStorage = 'no';\n    let currentCollection;\n    let currentCollectionIds;\n    currentCollection = this.getMovies('watched').movies;\n    currentCollectionIds = currentCollection.map(item => item.id);\n    if (currentCollectionIds.includes(id)) {\n      isMovieInLocalStorage = 'watched';\n    }\n    currentCollection = this.getMovies('queue').movies;\n    currentCollectionIds = currentCollection.map(item => item.id);\n    if (currentCollectionIds.includes(id)) {\n      isMovieInLocalStorage = 'queue';\n    }\n    return isMovieInLocalStorage;\n  }\n\n  changeKey(key) {\n    return key === 'watched' ? 'queue' : 'watched';\n  }\n}\n",null,"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n"],"names":["$8MBJY","parcelRequire","$f81bc9f24a80f169$export$2e2bcd8739ae039","LocalStorageAPI","this","loadData","saveData","Object","key","localStorageData","localStorage","getItem","JSON","parse","value","dataToSave","stringify","setItem","page","arguments","length","movies","totalPages","getTotalPages","result","getPaginationPage","checkMovie","id","changeKey","removeMovie","currentCollection","getMovies","push","error","console","log","name","message","indexToRemove","map","item","indexOf","splice","Math","ceil","array","start","end","slice","genres","find","element","isMovieInLocalStorage","includes","defineProperty","module","exports","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype"],"version":3,"file":"library.caed90b2.js.map"}