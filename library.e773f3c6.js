!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},t.parcelRequired7c6=a);var r=a("liFUv"),o=a("8MBJY"),s=a("a2hTj"),l={};Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e};var c=function(){"use strict";function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=this;e(o)(this,t),e(l)(this,"rootElement",""),e(l)(this,"totalPages",1),e(l)(this,"currentPage",1),e(l)(this,"currentItem",""),e(l)(this,"paginationObservers",[]),e(l)(this,"pageItems",[0]),e(l)(this,"itemsCarrouselElement",""),e(l)(this,"arrowLeftElement",""),e(l)(this,"arrowRightElement",""),e(l)(this,"dotsLeftElement",""),e(l)(this,"dotsRightElement",""),e(l)(this,"positionOfCarrousel",0),e(l)(this,"markupPagination",(function(){var e="";if(r.totalPages<=9){e='<div class="pagination__wrap">\n              <div class="pagination__item-arrow pagination__item-arrow--left"></div>';for(var t=1;t<=r.totalPages;t+=1)e+='<div class="pagination__item">'.concat(t,"</div>");e+='<div class="pagination__item-arrow pagination__item-arrow--right"></div>\n    </div>'}else{e='<div class="pagination__wrap">\n      <div class="pagination__item-arrow pagination__item-arrow--left"></div>\n      <div class="pagination__item pagination__item--first">1</div>\n      <div class="pagination__wrap--dots">\n        <div class="pagination__item pagination__item--second">2</div>\n        <div class="pagination__dots pagination__dots--left invisible">...</div>\n        <div class="pagination__wrap--carrousel">\n          <div class="pagination__carrousel">';for(var n=3;n<=r.totalPages-2;n+=1)e+='<div class="pagination__item pagination__item--carrousel">'.concat(n,"</div>");e+='</div>\n      </div>\n      <div class="pagination__dots pagination__dots--right">...</div>\n      <div class="pagination__item pagination__item--prelast">'.concat(r.totalPages-1,'</div>\n      </div>\n      <div class="pagination__item pagination__item--last">').concat(r.totalPages,'</div>\n      <div class="pagination__item-arrow pagination__item-arrow--right"></div>\n    </div>')}return e})),e(l)(this,"setViewPagination",(function(){1===r.currentPage?r.arrowLeftElement.classList.add("hidden"):r.arrowLeftElement.classList.remove("hidden"),r.currentPage===r.totalPages?r.arrowRightElement.classList.add("hidden"):r.arrowRightElement.classList.remove("hidden"),r.totalPages<=9||(r.currentPage>5?r.dotsLeftElement.classList.remove("invisible"):r.dotsLeftElement.classList.add("invisible"),r.totalPages-r.currentPage>=5?r.dotsRightElement.classList.remove("invisible"):r.dotsRightElement.classList.add("invisible"))})),e(l)(this,"changePageUp",(function(){r.resetCurrentItem(),r.currentPage+=1,r.currentItem=r.pageItems[r.currentPage],r.makeItemIsCurrent(r.currentItem),r.pageChanged(r.currentPage)})),e(l)(this,"changePageDown",(function(){r.resetCurrentItem(),r.currentPage-=1,r.currentItem=r.pageItems[r.currentPage],r.makeItemIsCurrent(r.currentItem),r.pageChanged(r.currentPage)})),e(l)(this,"apdateCurrentPage",(function(e){r.resetCurrentItem(),r.currentPage=Number(e.target.innerHTML),r.makeItemIsCurrent(e.target),r.setViewPagination(),r.pageChanged(r.currentPage)})),e(l)(this,"calculateCarrouselPosition",(function(){return r.currentPage<5?0:r.totalPages-r.currentPage<4?45*-(r.totalPages-9):135-45*(r.currentPage-2)})),e(l)(this,"moveItemsCarrousel",(function(){r.itemsCarrouselElement.style.transform="translatex(".concat(r.calculateCarrouselPosition(),"px)")})),e(l)(this,"addingListenerToItems",(function(){var e=r;document.querySelectorAll(".pagination__item").forEach((function(t){e.pageItems.push(t),t.addEventListener("click",e.apdateCurrentPage)}))})),e(l)(this,"addingListenerToArrowButton",(function(){r.arrowLeftElement.addEventListener("click",r.changePageDown),r.arrowRightElement.addEventListener("click",r.changePageUp)})),e(l)(this,"makeItemIsCurrent",(function(e){e.style.backgroundColor="#FF6B08",e.style.borderRadius="5px",e.style.color="#ffffff"})),e(l)(this,"resetCurrentItem",(function(){r.pageItems[r.currentPage].style.backgroundColor="#ffffff",r.pageItems[r.currentPage].style.color="#000000"})),e(l)(this,"initPagination",(function(){r.root.innerHTML="",r.totalPages<=1||(r.renderPagination(),r.currentItem=r.pageItems[r.currentPage],r.makeItemIsCurrent(r.currentItem),r.totalPages>9&&r.moveItemsCarrousel(),r.setViewPagination())})),e(l)(this,"addEventListener",(function(e,t){r.paginationObservers.push({eventName:e,listener:t})})),this.currentPage=n,this.totalPages=i,this.root=a}return e(s)(t,[{key:"renderPagination",value:function(){this.root.innerHTML=this.markupPagination(),this.arrowLeftElement=this.root.querySelector(".pagination__item-arrow--left"),this.arrowRightElement=this.root.querySelector(".pagination__item-arrow--right"),this.addingListenerToItems(),this.addingListenerToArrowButton(),this.totalPages>9&&(this.itemsCarrouselElement=this.root.querySelector(".pagination__carrousel"),this.dotsLeftElement=this.root.querySelector(".pagination__dots--left"),this.dotsRightElement=this.root.querySelector(".pagination__dots--right"))}},{key:"pageChanged",value:function(e){for(var t=0;t<this.paginationObservers.length;t++)"pageChanged"===this.paginationObservers[t].eventName&&this.paginationObservers[t].listener(e)}}]),t}(),d=new(0,r.default),g=document.querySelector(".notification"),u=document.querySelector("#libraryForm"),m=document.querySelector("#Watched"),h=document.querySelector("#library-render");function p(e){h.innerHTML="";var t=e.movies.map((function(e){var t=e.genres.map((function(e){return e.name})),n=[];t.length>3?((n=t.slice(0,2)).push("Other"),n=n.join(", ")):n=t.join(", ");var i="";return e.release_date&&(i=e.release_date.slice(0,4)),'\n            <li class="collection__item">\n            <div class="card">\n            <a href="" class="card__link" id="'.concat(e.id,'">\n          <img class=" card__img" src="https://www.themoviedb.org/t/p/w500/').concat(e.poster_path,'"onerror="this.onerror=null;this.src=\'https://ih1.redbubble.net/image.3553185369.0580/st,small,507x507-pad,600x600,f8f8f8.jpg\'" loading="lazy" alt="" >\n          <div class="card__wrap">\n             <h2 class="card__title" >').concat(e.title,'</h2>\n          <div class="card__data">\n       \n           <p class="card__genre">').concat(n,'</p>\n                                \n        <p class="card__year card__text">&nbsp | ').concat(i,"</p>\n              </div>\n    </div></a>\n    \n            </div>\n            </li>  \n     ")})).join("");h.insertAdjacentHTML("beforeend",t);var n=new c(e.page,e.totalPages,document.querySelector(".pagination__root"));n.initPagination(),n.addEventListener("pageChanged",v)}function _(){var e=document.createElement("p");e.classList.add("notification-text"),e.innerHTML="Oops, you didn't add anything yet...",g.appendChild(e)}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=d.getMovies("watched",e),n=d.getMovies("queue",e);console.log("поменяли кнопку"),m.checked?t?(console.log("рендерим watchedFilms",t),p(t)):(console.log("отображаем заглушку"),_()):n?(console.log("рендерим queueuFilms",n),p(n)):(console.log("отображаем заглушку"),_())}u.addEventListener("change",(function(){v()})),p(d.getMovies("watched"))}();
//# sourceMappingURL=library.e773f3c6.js.map
