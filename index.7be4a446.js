function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},s={},n=e.parcelRequired7c6;null==n&&((n=function(t){if(t in i)return i[t].exports;if(t in s){var e=s[t];delete s[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){s[t]=e},e.parcelRequired7c6=n),n("2Wrr0"),n("bF2Xj");var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i;return t};class r{renderPagination(){this.root.innerHTML=this.markupPagination(),this.arrowLeftElement=this.root.querySelector(".pagination__item-arrow--left"),this.arrowRightElement=this.root.querySelector(".pagination__item-arrow--right"),this.addingListenerToItems(),this.addingListenerToArrowButton(),this.totalPages>9&&(this.itemsCarrouselElement=this.root.querySelector(".pagination__carrousel"),this.dotsLeftElement=this.root.querySelector(".pagination__dots--left"),this.dotsRightElement=this.root.querySelector(".pagination__dots--right"))}pageChanged(t){for(let e=0;e<this.paginationObservers.length;e++)"pageChanged"===this.paginationObservers[e].eventName&&this.paginationObservers[e].listener(t)}constructor(e=1,i,s){t(a)(this,"rootElement",""),t(a)(this,"totalPages",1),t(a)(this,"currentPage",1),t(a)(this,"currentItem",""),t(a)(this,"paginationObservers",[]),t(a)(this,"pageItems",[0]),t(a)(this,"itemsCarrouselElement",""),t(a)(this,"arrowLeftElement",""),t(a)(this,"arrowRightElement",""),t(a)(this,"dotsLeftElement",""),t(a)(this,"dotsRightElement",""),t(a)(this,"positionOfCarrousel",0),t(a)(this,"markupPagination",(()=>{let t="";if(this.totalPages<=9){t='<div class="pagination__wrap">\n              <div class="pagination__item-arrow pagination__item-arrow--left"></div>';for(let e=1;e<=this.totalPages;e+=1)t+=`<div class="pagination__item">${e}</div>`;t+='<div class="pagination__item-arrow pagination__item-arrow--right"></div>\n    </div>'}else{t='<div class="pagination__wrap">\n      <div class="pagination__item-arrow pagination__item-arrow--left"></div>\n      <div class="pagination__item pagination__item--first">1</div>\n      <div class="pagination__wrap--dots">\n        <div class="pagination__item pagination__item--second">2</div>\n        <div class="pagination__dots pagination__dots--left invisible">...</div>\n        <div class="pagination__wrap--carrousel">\n          <div class="pagination__carrousel">';for(let e=3;e<=this.totalPages-2;e+=1)t+=`<div class="pagination__item pagination__item--carrousel">${e}</div>`;t+=`</div>\n      </div>\n      <div class="pagination__dots pagination__dots--right">...</div>\n      <div class="pagination__item pagination__item--prelast">${this.totalPages-1}</div>\n      </div>\n      <div class="pagination__item pagination__item--last">${this.totalPages}</div>\n      <div class="pagination__item-arrow pagination__item-arrow--right"></div>\n    </div>`}return t})),t(a)(this,"setViewPagination",(()=>{1===this.currentPage?this.arrowLeftElement.classList.add("hidden"):this.arrowLeftElement.classList.remove("hidden"),this.currentPage===this.totalPages?this.arrowRightElement.classList.add("hidden"):this.arrowRightElement.classList.remove("hidden"),this.totalPages<=9||(this.currentPage>5?this.dotsLeftElement.classList.remove("invisible"):this.dotsLeftElement.classList.add("invisible"),this.totalPages-this.currentPage>=5?this.dotsRightElement.classList.remove("invisible"):this.dotsRightElement.classList.add("invisible"))})),t(a)(this,"changePageUp",(()=>{this.resetCurrentItem(),this.currentPage+=1,this.currentItem=this.pageItems[this.currentPage],this.makeItemIsCurrent(this.currentItem),this.pageChanged(this.currentPage)})),t(a)(this,"changePageDown",(()=>{this.resetCurrentItem(),this.currentPage-=1,this.currentItem=this.pageItems[this.currentPage],this.makeItemIsCurrent(this.currentItem),this.pageChanged(this.currentPage)})),t(a)(this,"apdateCurrentPage",(t=>{this.resetCurrentItem(),this.currentPage=Number(t.target.innerHTML),this.makeItemIsCurrent(t.target),this.setViewPagination(),this.pageChanged(this.currentPage)})),t(a)(this,"calculateCarrouselPosition",(()=>this.currentPage<5?0:this.totalPages-this.currentPage<4?45*-(this.totalPages-9):135-45*(this.currentPage-2))),t(a)(this,"moveItemsCarrousel",(()=>{this.itemsCarrouselElement.style.transform=`translatex(${this.calculateCarrouselPosition()}px)`})),t(a)(this,"addingListenerToItems",(()=>{document.querySelectorAll(".pagination__item").forEach((t=>{this.pageItems.push(t),t.addEventListener("click",this.apdateCurrentPage)}))})),t(a)(this,"addingListenerToArrowButton",(()=>{this.arrowLeftElement.addEventListener("click",this.changePageDown),this.arrowRightElement.addEventListener("click",this.changePageUp)})),t(a)(this,"makeItemIsCurrent",(t=>{t.style.backgroundColor="#FF6B08",t.style.borderRadius="5px",t.style.color="#ffffff"})),t(a)(this,"resetCurrentItem",(()=>{this.pageItems[this.currentPage].style.backgroundColor="#ffffff",this.pageItems[this.currentPage].style.color="#000000"})),t(a)(this,"initPagination",(()=>{this.root.innerHTML="",this.totalPages<=1||(this.renderPagination(),this.currentItem=this.pageItems[this.currentPage],this.makeItemIsCurrent(this.currentItem),this.totalPages>9&&this.moveItemsCarrousel(),this.setViewPagination())})),t(a)(this,"addEventListener",((t,e)=>{this.paginationObservers.push({eventName:t,listener:e})})),this.currentPage=e,this.totalPages=i,this.root=s}}var o=n("bF2Xj");const l=new(0,(o=n("bF2Xj")).default);function d(t=1){const e=t;l.fetchGenres(),l.fetchTrendingMovies(e).then(p)}document.addEventListener("DOMContentLoaded",(()=>{d()}));const c=document.querySelector(".collection__list");let h="";function g(t=1){_(),l.fetchMoviesByQuery(h,t).then(p)}const u=localStorage.getItem("genresItem"),m=JSON.parse(u);function p(t){console.log(t.results),_();const e=t.results.map((t=>{const e=(i=t.genre_ids,s=m,i.map((t=>s.find((e=>e.id===t)))).map((t=>t.name)));var i,s;let n=[];e.length>3?(n=e.slice(0,2),n.push("Other"),n=n.join(", ")):n=e.join(", ");let a="";return t.release_date&&(a=t.release_date.slice(0,4)),`\n            <li class="collection__item">\n            <div class="card">\n            <a href="" class="card__link" id="${t.id}">\n          <img class=" card__img" src="https://www.themoviedb.org/t/p/w500/${t.poster_path}"onerror="this.onerror=null;this.src='https://ih1.redbubble.net/image.3553185369.0580/st,small,507x507-pad,600x600,f8f8f8.jpg'" loading="lazy" alt="" >\n          <div class="card__wrap">\n             <h2 class="card__title" >${t.title}</h2>\n          <div class="card__data">\n       \n          <p class="card__genre">${n}</p>\n                                \n        <p class="card__year card__text">&nbsp | ${a}</p>\n              </div>\n    </div></a>\n    \n            </div>\n            </li>  \n     `})).join("");c.insertAdjacentHTML("beforeend",e);const i=new r(t.page,t.totalPage,document.querySelector(".pagination__root"));i.initPagination(),i.addEventListener("pageChanged",g),i.addEventListener("pageChanged",d)}function _(){c.innerHTML=""}const v=new(0,o.default),f=document.querySelector("#search-form"),P=document.querySelector(".form-warning");f.addEventListener("submit",(async function(t){if(t.preventDefault(),P.classList.add("form-warning--hide"),v.searchQuery=t.currentTarget.elements.query.value.trim(),null===v.searchQuery||""===v.searchQuery)return;try{if(0===(await v.fetchMoviesByQuery(v.searchQuery)).results.length)return P.classList.remove("form-warning--hide"),void f.reset();e=v.searchQuery,h=e,g()}catch(t){console.log(t)}var e;f.reset()})),n("hbkd9");const w=document.querySelector(".modal"),L=document.querySelector(".footer-text-underline"),y=document.querySelector(".close");L.addEventListener("click",(function(){w.classList.add("is-active"),w.classList.remove("is-hidden")})),y.addEventListener("click",(function(){w.classList.remove("is-active"),w.classList.add("is-hidden")}));
//# sourceMappingURL=index.7be4a446.js.map
