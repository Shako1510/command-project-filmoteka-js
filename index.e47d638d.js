!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequired7c6=i),i("5nYdL"),i("hzDU7");var r=i("8MBJY"),s=i("a2hTj"),o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e};var c=function(){"use strict";function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=this;e(r)(this,t),e(o)(this,"rootElement",""),e(o)(this,"totalPages",1),e(o)(this,"currentPage",1),e(o)(this,"currentItem",""),e(o)(this,"paginationObservers",[]),e(o)(this,"pageItems",[0]),e(o)(this,"itemsCarrouselElement",""),e(o)(this,"arrowLeftElement",""),e(o)(this,"arrowRightElement",""),e(o)(this,"dotsLeftElement",""),e(o)(this,"dotsRightElement",""),e(o)(this,"positionOfCarrousel",0),e(o)(this,"markupPagination",(function(){var e="";if(s.totalPages<=9){e='<div class="pagination__wrap">\n              <div class="pagination__item-arrow pagination__item-arrow--left"></div>';for(var t=1;t<=s.totalPages;t+=1)e+='<div class="pagination__item">'.concat(t,"</div>");e+='<div class="pagination__item-arrow pagination__item-arrow--right"></div>\n    </div>'}else{e='<div class="pagination__wrap">\n      <div class="pagination__item-arrow pagination__item-arrow--left"></div>\n      <div class="pagination__item pagination__item--first">1</div>\n      <div class="pagination__wrap--dots">\n        <div class="pagination__item pagination__item--second">2</div>\n        <div class="pagination__dots pagination__dots--left invisible">...</div>\n        <div class="pagination__wrap--carrousel">\n          <div class="pagination__carrousel">';for(var n=3;n<=s.totalPages-2;n+=1)e+='<div class="pagination__item pagination__item--carrousel">'.concat(n,"</div>");e+='</div>\n      </div>\n      <div class="pagination__dots pagination__dots--right">...</div>\n      <div class="pagination__item pagination__item--prelast">'.concat(s.totalPages-1,'</div>\n      </div>\n      <div class="pagination__item pagination__item--last">').concat(s.totalPages,'</div>\n      <div class="pagination__item-arrow pagination__item-arrow--right"></div>\n    </div>')}return e})),e(o)(this,"setViewPagination",(function(){1===s.currentPage?s.arrowLeftElement.classList.add("hidden"):s.arrowLeftElement.classList.remove("hidden"),s.currentPage===s.totalPages?s.arrowRightElement.classList.add("hidden"):s.arrowRightElement.classList.remove("hidden"),s.totalPages<=9||(s.currentPage>5?s.dotsLeftElement.classList.remove("invisible"):s.dotsLeftElement.classList.add("invisible"),s.totalPages-s.currentPage>=5?s.dotsRightElement.classList.remove("invisible"):s.dotsRightElement.classList.add("invisible"))})),e(o)(this,"changePageUp",(function(){s.resetCurrentItem(),s.currentPage+=1,s.currentItem=s.pageItems[s.currentPage],s.makeItemIsCurrent(s.currentItem),s.pageChanged(s.currentPage)})),e(o)(this,"changePageDown",(function(){s.resetCurrentItem(),s.currentPage-=1,s.currentItem=s.pageItems[s.currentPage],s.makeItemIsCurrent(s.currentItem),s.pageChanged(s.currentPage)})),e(o)(this,"apdateCurrentPage",(function(e){s.resetCurrentItem(),s.currentPage=Number(e.target.innerHTML),s.makeItemIsCurrent(e.target),s.setViewPagination(),s.pageChanged(s.currentPage)})),e(o)(this,"calculateCarrouselPosition",(function(){return s.currentPage<5?0:s.totalPages-s.currentPage<4?45*-(s.totalPages-9):135-45*(s.currentPage-2)})),e(o)(this,"moveItemsCarrousel",(function(){s.itemsCarrouselElement.style.transform="translatex(".concat(s.calculateCarrouselPosition(),"px)")})),e(o)(this,"addingListenerToItems",(function(){var e=s;document.querySelectorAll(".pagination__item").forEach((function(t){e.pageItems.push(t),t.addEventListener("click",e.apdateCurrentPage)}))})),e(o)(this,"addingListenerToArrowButton",(function(){s.arrowLeftElement.addEventListener("click",s.changePageDown),s.arrowRightElement.addEventListener("click",s.changePageUp)})),e(o)(this,"makeItemIsCurrent",(function(e){e.style.backgroundColor="#FF6B08",e.style.borderRadius="5px",e.style.color="#ffffff"})),e(o)(this,"resetCurrentItem",(function(){s.pageItems[s.currentPage].style.backgroundColor="#ffffff",s.pageItems[s.currentPage].style.color="#000000"})),e(o)(this,"initPagination",(function(){s.root.innerHTML="",s.totalPages<=1||(s.renderPagination(),s.currentItem=s.pageItems[s.currentPage],s.makeItemIsCurrent(s.currentItem),s.totalPages>9&&s.moveItemsCarrousel(),s.setViewPagination())})),e(o)(this,"addEventListener",(function(e,t){s.paginationObservers.push({eventName:e,listener:t})})),this.currentPage=n,this.totalPages=a,this.root=i}return e(s)(t,[{key:"renderPagination",value:function(){this.root.innerHTML=this.markupPagination(),this.arrowLeftElement=this.root.querySelector(".pagination__item-arrow--left"),this.arrowRightElement=this.root.querySelector(".pagination__item-arrow--right"),this.addingListenerToItems(),this.addingListenerToArrowButton(),this.totalPages>9&&(this.itemsCarrouselElement=this.root.querySelector(".pagination__carrousel"),this.dotsLeftElement=this.root.querySelector(".pagination__dots--left"),this.dotsRightElement=this.root.querySelector(".pagination__dots--right"))}},{key:"pageChanged",value:function(e){for(var t=0;t<this.paginationObservers.length;t++)"pageChanged"===this.paginationObservers[t].eventName&&this.paginationObservers[t].listener(e)}}]),t}(),l=i("bpxeT"),d=i("2TvXO"),u=i("hzDU7"),g=new(0,(u=i("hzDU7")).default);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=e;g.fetchGenres(),g.fetchTrendingMovies(t).then(w)}document.addEventListener("DOMContentLoaded",(function(){h()}));var m=document.querySelector(".collection__list"),p="";function v(e){p=e,f()}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;L(),g.fetchMoviesByQuery(p,e).then(w)}var _=localStorage.getItem("genresItem"),P=JSON.parse(_);function w(e){console.log(e.results),L();var t=e.results.map((function(e){var t,n,a=(t=e.genre_ids,n=P,t.map((function(e){return n.find((function(t){return t.id===e}))})).map((function(e){return e.name}))),i=[];a.length>3?((i=a.slice(0,2)).push("Other"),i=i.join(", ")):i=a.join(", ");var r="";return e.release_date&&(r=e.release_date.slice(0,4)),'\n            <li class="collection__item">\n            <div class="card">\n            <a href="" class="card__link" id="'.concat(e.id,'">\n          <img class=" card__img" src="https://www.themoviedb.org/t/p/w500/').concat(e.poster_path,'"onerror="this.onerror=null;this.src=\'https://ih1.redbubble.net/image.3553185369.0580/st,small,507x507-pad,600x600,f8f8f8.jpg\'" loading="lazy" alt="" >\n          <div class="card__wrap">\n             <h2 class="card__title" >').concat(e.title,'</h2>\n          <div class="card__data">\n       \n          <p class="card__genre">').concat(i,'</p>\n                                \n        <p class="card__year card__text">&nbsp | ').concat(r,"</p>\n              </div>\n    </div></a>\n    \n            </div>\n            </li>  \n     ")})).join("");m.insertAdjacentHTML("beforeend",t);var n=new c(e.page,e.totalPage,document.querySelector(".pagination__root"));n.initPagination(),n.addEventListener("pageChanged",f),n.addEventListener("pageChanged",h)}function L(){m.innerHTML=""}var y=new(0,u.default),b=document.querySelector("#search-form"),E=document.querySelector(".form-warning");function I(){return(I=e(l)(e(d).mark((function t(n){return e(d).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),E.classList.add("form-warning--hide"),y.searchQuery=n.currentTarget.elements.query.value.trim(),null!==y.searchQuery&&""!==y.searchQuery){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,y.fetchMoviesByQuery(y.searchQuery);case 8:if(0!==e.sent.results.length){e.next=13;break}return E.classList.remove("form-warning--hide"),b.reset(),e.abrupt("return");case 13:v(y.searchQuery),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0);case 19:b.reset();case 20:case"end":return e.stop()}}),t,null,[[5,16]])})))).apply(this,arguments)}b.addEventListener("submit",(function(e){return I.apply(this,arguments)})),i("liFUv");var C=document.querySelector(".modal"),k=document.querySelector(".footer-text-underline"),x=document.querySelector(".close");k.addEventListener("click",(function(){C.classList.add("is-active"),C.classList.remove("is-hidden")})),x.addEventListener("click",(function(){C.classList.remove("is-active"),C.classList.add("is-hidden")}))}();
//# sourceMappingURL=index.e47d638d.js.map
