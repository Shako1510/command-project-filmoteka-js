function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},s={},a=e.parcelRequired7c6;null==a&&((a=function(t){if(t in i)return i[t].exports;if(t in s){var e=s[t];delete s[t];var a={id:t,exports:{}};return i[t]=a,e.call(a.exports,a,a.exports),a.exports}var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){s[t]=e},e.parcelRequired7c6=a);var n=a("hbkd9"),r={};Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i;return t};class o{renderPagination(){this.root.innerHTML=this.markupPagination(),this.arrowLeftElement=this.root.querySelector(".pagination__item-arrow--left"),this.arrowRightElement=this.root.querySelector(".pagination__item-arrow--right"),this.addingListenerToItems(),this.addingListenerToArrowButton(),this.totalPages>9&&(this.itemsCarrouselElement=this.root.querySelector(".pagination__carrousel"),this.dotsLeftElement=this.root.querySelector(".pagination__dots--left"),this.dotsRightElement=this.root.querySelector(".pagination__dots--right"))}pageChanged(t){for(let e=0;e<this.paginationObservers.length;e++)"pageChanged"===this.paginationObservers[e].eventName&&this.paginationObservers[e].listener(t)}constructor(e=1,i,s){t(r)(this,"rootElement",""),t(r)(this,"totalPages",1),t(r)(this,"currentPage",1),t(r)(this,"currentItem",""),t(r)(this,"paginationObservers",[]),t(r)(this,"pageItems",[0]),t(r)(this,"itemsCarrouselElement",""),t(r)(this,"arrowLeftElement",""),t(r)(this,"arrowRightElement",""),t(r)(this,"dotsLeftElement",""),t(r)(this,"dotsRightElement",""),t(r)(this,"positionOfCarrousel",0),t(r)(this,"markupPagination",(()=>{let t="";if(this.totalPages<=9){t='<div class="pagination__wrap">\n              <div class="pagination__item-arrow pagination__item-arrow--left"></div>';for(let e=1;e<=this.totalPages;e+=1)t+=`<div class="pagination__item">${e}</div>`;t+='<div class="pagination__item-arrow pagination__item-arrow--right"></div>\n    </div>'}else{t='<div class="pagination__wrap">\n      <div class="pagination__item-arrow pagination__item-arrow--left"></div>\n      <div class="pagination__item pagination__item--first">1</div>\n      <div class="pagination__wrap--dots">\n        <div class="pagination__item pagination__item--second">2</div>\n        <div class="pagination__dots pagination__dots--left invisible">...</div>\n        <div class="pagination__wrap--carrousel">\n          <div class="pagination__carrousel">';for(let e=3;e<=this.totalPages-2;e+=1)t+=`<div class="pagination__item pagination__item--carrousel">${e}</div>`;t+=`</div>\n      </div>\n      <div class="pagination__dots pagination__dots--right">...</div>\n      <div class="pagination__item pagination__item--prelast">${this.totalPages-1}</div>\n      </div>\n      <div class="pagination__item pagination__item--last">${this.totalPages}</div>\n      <div class="pagination__item-arrow pagination__item-arrow--right"></div>\n    </div>`}return t})),t(r)(this,"setViewPagination",(()=>{1===this.currentPage?this.arrowLeftElement.classList.add("hidden"):this.arrowLeftElement.classList.remove("hidden"),this.currentPage===this.totalPages?this.arrowRightElement.classList.add("hidden"):this.arrowRightElement.classList.remove("hidden"),this.totalPages<=9||(this.currentPage>5?this.dotsLeftElement.classList.remove("invisible"):this.dotsLeftElement.classList.add("invisible"),this.totalPages-this.currentPage>=5?this.dotsRightElement.classList.remove("invisible"):this.dotsRightElement.classList.add("invisible"))})),t(r)(this,"changePageUp",(()=>{this.resetCurrentItem(),this.currentPage+=1,this.currentItem=this.pageItems[this.currentPage],this.makeItemIsCurrent(this.currentItem),this.pageChanged(this.currentPage)})),t(r)(this,"changePageDown",(()=>{this.resetCurrentItem(),this.currentPage-=1,this.currentItem=this.pageItems[this.currentPage],this.makeItemIsCurrent(this.currentItem),this.pageChanged(this.currentPage)})),t(r)(this,"apdateCurrentPage",(t=>{this.resetCurrentItem(),this.currentPage=Number(t.target.innerHTML),this.makeItemIsCurrent(t.target),this.setViewPagination(),this.pageChanged(this.currentPage)})),t(r)(this,"calculateCarrouselPosition",(()=>this.currentPage<5?0:this.totalPages-this.currentPage<4?45*-(this.totalPages-9):135-45*(this.currentPage-2))),t(r)(this,"moveItemsCarrousel",(()=>{this.itemsCarrouselElement.style.transform=`translatex(${this.calculateCarrouselPosition()}px)`})),t(r)(this,"addingListenerToItems",(()=>{document.querySelectorAll(".pagination__item").forEach((t=>{this.pageItems.push(t),t.addEventListener("click",this.apdateCurrentPage)}))})),t(r)(this,"addingListenerToArrowButton",(()=>{this.arrowLeftElement.addEventListener("click",this.changePageDown),this.arrowRightElement.addEventListener("click",this.changePageUp)})),t(r)(this,"makeItemIsCurrent",(t=>{t.style.backgroundColor="#FF6B08",t.style.borderRadius="5px",t.style.color="#ffffff"})),t(r)(this,"resetCurrentItem",(()=>{this.pageItems[this.currentPage].style.backgroundColor="#ffffff",this.pageItems[this.currentPage].style.color="#000000"})),t(r)(this,"initPagination",(()=>{this.root.innerHTML="",this.totalPages<=1||(this.renderPagination(),this.currentItem=this.pageItems[this.currentPage],this.makeItemIsCurrent(this.currentItem),this.totalPages>9&&this.moveItemsCarrousel(),this.setViewPagination())})),t(r)(this,"addEventListener",((t,e)=>{this.paginationObservers.push({eventName:t,listener:e})})),this.currentPage=e,this.totalPages=i,this.root=s}}const l=new(0,n.default),h=document.querySelector(".notification"),d=document.querySelector("#libraryForm"),g=document.querySelector("#Watched"),c=document.querySelector("#library-render");function u(t){c.innerHTML="",h.innerHTML="";const e=t.movies.map((t=>{const e=t.genres.map((t=>t.name));let i=[];e.length>3?(i=e.slice(0,2),i.push("Other"),i=i.join(", ")):i=e.join(", ");let s="";t.release_date&&(s=t.release_date.slice(0,4));let a="";return t.vote_average&&(a=t.vote_average.toString().slice(0,3)),`\n            <li class="collection__item">\n            <div class="card">\n            <a href="" class="card__link" id="${t.id}">\n          <img class=" card__img" src="https://www.themoviedb.org/t/p/w500/${t.poster_path}"onerror="this.onerror=null;this.src='https://ih1.redbubble.net/image.3553185369.0580/st,small,507x507-pad,600x600,f8f8f8.jpg'" loading="lazy" alt="" >\n          <div class="card__wrap">\n             <h2 class="card__title" >${t.title}</h2>\n          <div class="card__data">\n       \n           <p class="card__genre">${i}</p>\n                                \n        <p class="card__year card__text">&nbsp | ${s}</p>\n        <p class="card_vote">${a}</p>\n              </div>\n    </div></a>\n    \n            </div>\n            </li>\n     `})).join("");c.insertAdjacentHTML("beforeend",e);const i=new o(t.page,t.totalPages,document.querySelector(".pagination__root"));i.initPagination(),i.addEventListener("pageChanged",p)}function m(){c.innerHTML="",h.innerHTML="";const t=document.createElement("p");t.classList.add("notification-text"),t.innerHTML="Oops, you didn't add anything yet...",h.appendChild(t)}function p(t=1){const e=l.getMovies("watched",t),i=l.getMovies("queue",t);console.log("поменяли кнопку"),g.checked?0===e.movies.length?(console.log("отображаем заглушку"),m()):(console.log("рендерим watchedFilms",e),u(e)):0===i.movies.length?(console.log("отображаем заглушку"),m()):(console.log("рендерим queueuFilms",i),u(i))}d.addEventListener("change",(()=>{p()})),u(l.getMovies("watched"));const _=l.getMovies("watched");0===_.movies.length?m():u(_);
//# sourceMappingURL=library.817c1adc.js.map
